<!DOCTYPE html>
<html lang="en">
<head>
	<title>Shower Presentation Engine</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="node_modules/shower-ribbon/styles/screen-16x10.css">
	<style>
		/* Clear slide */
		.slide.clear {
			padding: 0;
		}
		/* Cover background image */
		.cover-bg {
			padding: 0;
			background-repeat: no-repeat;
			background-size: cover;
			background-position: 50%;
		}
		.contain-bg {
			padding: 0;
			background-repeat: no-repeat;
			background-size: contain;
			background-position: 50%;
		}
		/* Remove arrow */
		.slide::after {
			display: none;
		}
		/* Slide with narrow margins */
		.slide.narrow-margins {
			padding: 53px 80px 0;
		}

		.slide_colorful h2 {
			color: white;
		}
		.slide_theme_turquoise {
			background-color: #2db2bf;
		}
		.slide_theme_raspberry {
			background-color: #c50050;
		}
		.slide_theme_violet {
			background-color: #8939a9;
		}
		.slide_theme_green {
			background-color: #359c69;
		}
		.slide_theme_light-green {
			background-color: #7ea91c;
		}
		.slide_theme_orange {
			background-color: #E67014;
		}

		/* Code */
		.slide .no-counter-code code::before {
			display: none;
		}
		.split-code {
    		float: left;
    	}
    	.split-code:first-child {
    		width: 50%;
    		margin-right: 30px;
    	}
    	.js-string {
    		color: darkgoldenrod;
    	}
    	.js-boolean {
    		color: magenta;
    	}
	</style>
</head>
<body class="shower list">
	<header class="caption">
		<h1>Оптимизируй сборку!</h1>
		<p>Vladimir Rakchaev, NBCO Yandex.Money LLC</p>
	</header>
	<section class="slide cover-bg" style="background-image: url(pictures/title.jpg)" id="title">
		<h2>Оптимизируй сборку!</h2>
	</section>
	<section class="slide slide_colorful slide_theme_turquoise">
		<h2 class="shout">История</h2>
	</section>
	<section class="slide narrow-margins narrow-margins">
		<pre class="no-counter-code split-code">
			<code>blocks</code>
			<code>|-- yamoney</code>
			<code>`-- islands</code>
			<code>libs</code>
			<code>`-- islands-*</code>
		</pre>
		<pre class="no-counter-code split-code">
			<code>bundles</code>
			<code>`-- common</code>
		</pre>
	</section>
	<section class="slide narrow-margins">
		<pre class="no-counter-code split-code">
			<code>blocks</code>
			<code>|-- yamoney</code>
			<code>|-- islands</code>
			<code>`-- <mark>projects</mark></code>
			<code>libs</code>
			<code>`-- islands-*</code>
		</pre>
		<pre class="no-counter-code split-code">
			<code>bundles</code>
			<code>|-- common</code>
			<code>|-- <mark>projects</mark></code>
			<code>|   `-- <mark>...</mark></code>
			<code>`-- <mark>merged</mark></code>
		</pre>
	</section>
	<section class="slide narrow-margins">
		<pre class="no-counter-code split-code">
			<code>blocks</code>
			<code>|-- <mark>full-site</mark></code>
			<code>|   |-- yamoney</code>
			<code>|   |-- islands</code>
			<code>|   `-- projects</code>
			<code>`-- <mark>mobile-site</mark></code>
			<code>    |-- <mark>yamoney</mark></code>
			<code>    `-- <mark>o2</mark></code>
			<code>libs</code>
			<code>|-- <mark>bem-co*</mark></code>
			<code>`-- islands-*</code>
		</pre>
		<pre class="no-counter-code split-code">
			<code>bundles</code>
			<code>|-- <mark>full-site</mark></code>
			<code>|   |-- common</code>
			<code>|   |-- projects</code>
			<code>|   |   `-- ...</code>
			<code>|   `-- merged</code>
			<code>`-- <mark>mobile-site</mark></code>
			<code>    `--- <mark>common</mark></code>
		</pre>
	</section>
	<section class="slide narrow-margins">
		<pre class="no-counter-code split-code">
			<code>blocks</code>
			<code>|-- full-site</code>
			<code>|   |-- yamoney</code>
			<code>|   |-- islands</code>
			<code>|   `-- projects</code>
			<code>`-- mobile-site</code>
			<code>    |-- yamoney</code>
			<code>    |-- o2</code>
			<code>    `-- <mark>projects</mark></code>
			<code>libs</code>
		</pre>
		<pre class="no-counter-code split-code">
			<code>bundles</code>
			<code>|-- full-site</code>
			<code>|   |-- common</code>
			<code>|   |-- projects</code>
			<code>|   |   `-- ...</code>
			<code>|   `-- merged</code>
			<code>`-- mobile-site</code>
			<code>    |--- common</code>
			<code>    |-- <mark>projects</mark></code>
			<code>    |   `-- <mark>...</mark></code>
			<code>    `-- <mark>merged</mark></code>
		</pre>
	</section>
	<section class="slide narrow-margins">
		<pre class="no-counter-code split-code">
			<code>blocks</code>
			<code>|-- full-site</code>
			<code>|   |-- yamoney</code>
			<code>|   |   <mark>|-- common.blocks</mark></code>
			<code>|   |   <mark>|-- deskpad.blocks</mark></code>
			<code>|   |   <mark>|-- desktop.blocks</mark></code>
			<code>|   |   <mark>|-- touch-pad.blocks</mark></code>
			<code>|   |   <mark>|-- touch-phone.blocks</mark></code>
			<code>|   |   <mark>`-- touch.blocks</mark></code>
			<code>|   ...</code>
			<code>libs</code>
		</pre>
		<pre class="no-counter-code split-code">
			<code>bundles</code>
			<code>|-- <mark>desktop</mark></code>
			<code>|   |-- common</code>
			<code>|   |-- projects</code>
			<code>|   |   `-- ...</code>
			<code>|   `-- merged</code>
			<code>|-- <mark>touch-pad</mark></code>
			<code>|   `-- ...</code>
			<code>`-- <mark>touch-phone</mark></code>
			<code>    `-- ...</code>
		</pre>
	</section>
	<section class="slide">
		<h2>А еще</h2>
		<ul>
			<li class="next">Плюс старый <code>mobile-site</code></li>
			<li class="next">Плюс <code>isomorphic-libs</code></li>
			<li class="next">Плюс тесты</li>
		</ul>
	</section>
	<section class="slide cover-bg" style="background-image: url(pictures/cat.jpg)" id="subbotnik">
		<style>
			#subbotnik h2 {
				color: #fff;
				text-shadow: 0 0 30px #000;
			}
		</style>
		<h2 class="shout next">Субботник!</h2>
	</section>
	<section class="slide slide slide_colorful slide_theme_raspberry">
		<h2 class="shout">го оптимизировать? <span class="next">я&nbsp;создал.</span></h2>
	</section>
	<section class="slide slide slide_colorful slide_theme_turquoise">
		<h2 class="shout">&mdash;&nbsp;Обнови enb и технологии!</h2>
	</section>
	<section class="slide slide slide_colorful slide_theme_green">
		<h2 class="shout">&mdash;&nbsp;Шаблонизируй на свежем bem&#8209;xjst!</h2>
	</section>
	<section class="slide cover-bg" style="background-image: url(pictures/borschik.jpg)" id="borschik">
		<style>
			#borschik h2 {
				color: #fff;
				text-shadow: 0 0 30px #000;
			}
		</style>
		<h2 class="shout">&mdash;&nbsp;Откажись от borschik'а!</h2>
	</section>

[
  require('postcss-url')({
    url: 'inline',
    maxSize: 1,
    fallback: function (URL, decl, from, dirname, to, options, result) {
      // Для абсолютных путей ничего преобразовывать не нужно.
      // Перейти на path.isAbsolutePath при обновлении nodejs.
      if (URL.charAt(0) === '/') {
        return URL;
      }
     }
  }),
  require('postcss-copy')({
    src: ['blocks/', 'libs/'],
    dest: 'static/_/',
    relativePath: function(dirname, fileMeta, result, opts) {
      return opts.dest;
    }
  }),
  require('postcss-url')({
    url: function (URL, decl, from, dirname, to, options, result) {
      if (URL.substring(0, 4) !== 'data') {
        return '/b/_/' + URL;
      }
    }
  })
]

[
  require('postcss-url')({
    url: 'inline',
    maxSize: 0.5,
    fallback: function (URL, decl, from, dirname, to, options, result) {
      // Для сылок на yastatic и /i/ ничего преобразовывать не нужно.
      // Перейти на path.isAbsolutePath при обновлении nodejs.
      if (URL.charAt(0) === '/') {
          return URL;
      }
    }
  }),
  require('postcss-copy')({
    src: ['blocks/', 'libs/'],
    dest: 'static/_/',
    hashFunction: function(contents) {
      // Хэш как в borschik для использования готовых ресурсов с yastatic.net
      return crypto.createHash('sha1')
        .update(contents)
        .digest('base64')
        .replace(/\+/g, '-')
        .replace(/\//g, '_')
        .replace(/=/g, '')
        .replace(/^[+-]+/g, '');
    },
    relativePath: function(dirname, fileMeta, result, opts) {
      return opts.dest;
    }
  }),
  require('postcss-url')({
    url: function (URL, decl, from, dirname, to, options, result) {
      var islandsDir = path.resolve('libs', 'islands');
      var isIslandsResource = path.relative(islandsDir, dirname).substring(0, 2) !== '..';
      var baseStaticUrl = isIslandsResource ? '//yastatic.net/islands/_/' : '/b/_/';

      if (URL.substring(0, 4) !== 'data') {
        return baseStaticUrl + URL;
      }
    }
  })
]

	<section class="slide slide slide_colorful slide_theme_violet">
		<h2 class="shout">&mdash;&nbsp;Собирай только нужное!</h2>
	</section>
	<section class="slide">
		<pre>
			<code>{</code>
			<code>    onlyProjects: [<span class="js-string">'office'</span>],</code>
			<code>    platforms: [<span class="js-string">'desktop'</span>],</code>
			<code>    langs: [<span class="js-string">'ru'</span>],</code>
			<code>    needIeCss: <span class="js-boolean">false</span>,</code>
			<code>    needMobileSite: <span class="js-boolean">false</span>,</code>
			<code>    needOldSite: <span class="js-boolean">false</span>,</code>
			<code>    needIsomorphicLib: <span class="js-boolean">false</span></code>
			<code>}</code>
		</pre>
	</section>
	<section class="slide slide slide_colorful slide_theme_light-green">
		<h2 class="shout">&mdash;&nbsp;Собирай на&nbsp;свежей ноде!</h2>
	</section>
	<section class="slide slide slide_colorful slide_theme_orange">
		<h2 class="shout">&mdash;&nbsp;Закажи апгрейд железа!</h2>
	</section>
	<p class="badge">
		<a href="https://github.com/shower/shower">Fork me on GitHub</a>
	</p>
	<!--
		To hide progress bar from entire presentation
		just remove “progress” element.
		-->
	<div class="progress"></div>
	<script src="node_modules/shower-core/shower.min.js"></script>
	<!-- Copyright © 2015 Yours Truly, Famous Inc. -->
	<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>
